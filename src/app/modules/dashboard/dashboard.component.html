<div class="flex flex-col flex-auto w-full p-8 xs:p-2">
  <div *ngIf="!isLoading">
    <div class="flex flex-wrap w-full">
      <div class="flex items-center justify-between w-full my-4 px-4 xs:pr-0">
        <div class="mr-6">
          <h2 class="m-0">Dashboard</h2>
          <div class="text-secondary tracking-tight">
            Monitor order and user related details.
          </div>
        </div>
      </div>

      <div class="flex flex-wrap w-full gt-sm:w-full">
        <!-- Previous statement -->
        <div class="flex flex-auto w-full min-w-80 p-4 gt-sm:w-1/3">
          <div
            class="relative flex flex-col flex-auto p-6 pr-3 pb-3 bg-card border-green rounded border-l-4 shadow-md overflow-hidden"
          >
            <div class="absolute bottom-0 right-0 w-24 h-24 -m-6">
              <mat-icon
                class="icon-size-96 opacity-12 text-green"
                [svgIcon]="'heroicons_outline:check-circle'"
              ></mat-icon>
            </div>
            <div class="flex items-center">
              <div class="flex flex-col">
                <div
                  class="font-bold text-md text-secondary uppercase tracking-wider"
                >
                  Total Users
                </div>
                <div class="text-green font-medium text-sm">
                  As of {{ currentDate | date: 'longDate' }}
                </div>
              </div>
            </div>
            <div class="flex flex-row flex-wrap mt-4 -mx-6">
              <div class="flex flex-col mx-6 my-3 xs:w-full">
                <div
                  class="font-semibold text-xs text-hint uppercase tracking-wider leading-none"
                >
                  Total Number of Users
                </div>
                <div class="mt-2 font-medium text-3xl leading-none">
                  {{ counts?.users_count ? counts.users_count : 0 }}
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="flex flex-auto w-full min-w-80 p-4 gt-sm:w-1/3">
          <div
            class="relative flex flex-col flex-auto p-6 pr-3 pb-3 bg-card border-red rounded border-l-4 shadow-md overflow-hidden"
          >
            <div class="absolute bottom-0 right-0 w-24 h-24 -m-6">
              <mat-icon
                class="icon-size-96 opacity-12 text-red"
                [svgIcon]="'heroicons_outline:check-circle'"
              ></mat-icon>
            </div>
            <div class="flex items-center">
              <div class="flex flex-col">
                <div
                  class="font-bold text-md text-secondary uppercase tracking-wider"
                >
                  Total Partners
                </div>
                <div class="text-red font-medium text-sm">
                  As of {{ currentDate | date: 'longDate' }}
                </div>
              </div>
            </div>
            <div class="flex flex-row flex-wrap mt-4 -mx-6">
              <div class="flex flex-col mx-6 my-3 xs:w-full">
                <div
                  class="font-semibold text-xs text-hint uppercase tracking-wider leading-none"
                >
                  Total Number of Partners
                </div>
                <div class="mt-2 font-medium text-3xl leading-none">
                  {{ counts?.partners_count ? counts.partners_count : 0 }}
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="flex flex-auto w-full min-w-80 p-4 gt-sm:w-1/3">
          <div
            class="relative flex flex-col flex-auto p-6 pr-3 pb-3 bg-card border-blue rounded border-l-4 shadow-md overflow-hidden"
          >
            <div class="absolute bottom-0 right-0 w-24 h-24 -m-6">
              <mat-icon
                class="icon-size-96 opacity-12 text-blue"
                [svgIcon]="'heroicons_outline:check-circle'"
              ></mat-icon>
            </div>
            <div class="flex items-center">
              <div class="flex flex-col">
                <div
                  class="font-bold text-md text-secondary uppercase tracking-wider"
                >
                  Total Orders
                </div>
                <div class="text-blue font-medium text-sm">
                  As of {{ currentDate | date: 'longDate' }}
                </div>
              </div>
            </div>
            <div class="flex flex-row flex-wrap mt-4 -mx-6">
              <div class="flex flex-col mx-6 my-3 xs:w-full">
                <div
                  class="font-semibold text-xs text-hint uppercase tracking-wider leading-none"
                >
                  Total Number of Orders
                </div>
                <div class="mt-2 font-medium text-3xl leading-none">
                  {{ counts?.orders_count ? counts.orders_count : 0 }}
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="flex flex-auto w-full p-4 overflow-hidden gt-sm:w-1/2">
        <div
          class="flex flex-col flex-auto bg-card shadow-md rounded overflow-hidden"
        >
          <div class="p-6">
            <div
              class="font-bold text-md text-secondary uppercase tracking-wider"
            >
              Recent Users
            </div>
            <div class="text-sm text-hint font-medium">
              {{ tableData.users_list.count }} new today
            </div>
          </div>
          <div class="overflow-auto">
            <table
              class="w-full bg-transparent"
              mat-table
              matSort
              [dataSource]="recentUsersDataSource"
              #recentUsersTable
            >
              <!-- Full_name -->
              <ng-container matColumnDef="full_name">
                <th
                  class="bg-cool-gray-50 dark:bg-cool-gray-700 border-t"
                  mat-header-cell
                  mat-sort-header
                  *matHeaderCellDef
                >
                  <span class="whitespace-no-wrap"> Full Name </span>
                </th>
                <td mat-cell *matCellDef="let user">
                  <span
                    class="pr-6 font-medium text-sm text-secondary whitespace-no-wrap"
                  >
                    {{ user.full_name | slice: 0:25 }}
                  </span>
                </td>
              </ng-container>

              <!-- mobile -->
              <ng-container matColumnDef="mobile">
                <th
                  class="bg-cool-gray-50 dark:bg-cool-gray-700 border-t"
                  mat-header-cell
                  mat-sort-header
                  *matHeaderCellDef
                >
                  <span class="whitespace-no-wrap"> Mobile </span>
                </th>
                <td mat-cell *matCellDef="let user">
                  <span class="pr-6 whitespace-no-wrap">
                    {{ user.mobile }}
                  </span>
                </td>
              </ng-container>

              <!-- Status -->
              <ng-container matColumnDef="status">
                <th
                  class="bg-cool-gray-50 dark:bg-cool-gray-700 border-t"
                  mat-header-cell
                  mat-sort-header
                  *matHeaderCellDef
                >
                  <span class="whitespace-no-wrap"> Status </span>
                </th>
                <td mat-cell *matCellDef="let user">
                  <!-- <span
                    class="inline-flex items-center font-bold text-xs px-2 py-2px rounded-full tracking-wide uppercase"
                    [ngClass]="{
                      'red-200': user.status === 'active',
                      'green-200': user.status === 'inactive'
                    }"
                  > 
                    <span
                      class="w-2 h-2 rounded-full mr-2"
                      [ngClass]="{
                        'bg-red': transaction.status === 'pending',
                        'bg-green': transaction.status === 'completed'
                      }"
                    ></span>
                -->
                  <span
                    class="inline-flex items-center font-bold text-xs px-2 py-2px rounded-full tracking-wide uppercase red-200"
                  >
                    <span class="w-2 h-2 rounded-full mr-2 bg-red"></span>
                    <span class="pr-2px leading-relaxed whitespace-no-wrap">{{
                      user.status
                    }}</span>
                  </span>
                </td>
              </ng-container>

              <!-- Footer -->
              <ng-container matColumnDef="recentUsersTableFooter">
                <td
                  class="px-3 border-none"
                  mat-footer-cell
                  *matFooterCellDef
                  colspan="6"
                >
                  <button
                    mat-button
                    [routerLink]="['/users']"
                    [color]="'primary'"
                  >
                    See all users
                  </button>
                </td>
              </ng-container>

              <tr
                mat-header-row
                *matHeaderRowDef="recentUsersTableColumns"
              ></tr>
              <tr
                class="order-row h-16"
                mat-row
                *matRowDef="let row; columns: recentUsersTableColumns"
              ></tr>
              <tr
                class="h-16"
                mat-footer-row
                *matFooterRowDef="['recentUsersTableFooter']"
              ></tr>
            </table>
          </div>
        </div>
      </div>

      <div class="flex flex-auto w-full p-4 overflow-hidden gt-sm:w-1/2">
        <div
          class="flex flex-col flex-auto bg-card shadow-md rounded overflow-hidden"
        >
          <div class="p-6">
            <div
              class="font-bold text-md text-secondary uppercase tracking-wider"
            >
              Recent Partners
            </div>
            <div class="text-sm text-hint font-medium">
              {{ tableData.partners_list.count }} new today
            </div>
          </div>
          <div class="overflow-auto">
            <table
              class="w-full bg-transparent"
              mat-table
              matSort
              [dataSource]="recentPartnersDataSource"
              #recentPartnersTable
            >
              <!-- Full_name -->
              <ng-container matColumnDef="full_name">
                <th
                  class="bg-cool-gray-50 dark:bg-cool-gray-700 border-t"
                  mat-header-cell
                  mat-sort-header
                  *matHeaderCellDef
                >
                  <span class="whitespace-no-wrap"> Full Name </span>
                </th>
                <td mat-cell *matCellDef="let partner">
                  <span
                    class="pr-6 font-medium text-sm text-secondary whitespace-no-wrap"
                  >
                    {{ partner.full_name | slice: 0:25 }}
                  </span>
                </td>
              </ng-container>

              <!-- mobile -->
              <ng-container matColumnDef="mobile">
                <th
                  class="bg-cool-gray-50 dark:bg-cool-gray-700 border-t"
                  mat-header-cell
                  mat-sort-header
                  *matHeaderCellDef
                >
                  <span class="whitespace-no-wrap"> Mobile </span>
                </th>
                <td mat-cell *matCellDef="let partner">
                  <span class="pr-6 whitespace-no-wrap">
                    {{ partner.mobile }}
                  </span>
                </td>
              </ng-container>

              <!-- Status -->
              <ng-container matColumnDef="status">
                <th
                  class="bg-cool-gray-50 dark:bg-cool-gray-700 border-t"
                  mat-header-cell
                  mat-sort-header
                  *matHeaderCellDef
                >
                  <span class="whitespace-no-wrap"> Status </span>
                </th>
                <td mat-cell *matCellDef="let partner">
                  <!-- <span
                    class="inline-flex items-center font-bold text-xs px-2 py-2px rounded-full tracking-wide uppercase"
                    [ngClass]="{
                      'red-200': user.status === 'active',
                      'green-200': user.status === 'inactive'
                    }"
                  > 
                    <span
                      class="w-2 h-2 rounded-full mr-2"
                      [ngClass]="{
                        'bg-red': transaction.status === 'pending',
                        'bg-green': transaction.status === 'completed'
                      }"
                    ></span>
                -->
                  <span
                    class="inline-flex items-center font-bold text-xs px-2 py-2px rounded-full tracking-wide uppercase red-200"
                  >
                    <span class="w-2 h-2 rounded-full mr-2 bg-red"></span>
                    <span class="pr-2px leading-relaxed whitespace-no-wrap">{{
                      partner.status
                    }}</span>
                  </span>
                </td>
              </ng-container>

              <!-- Footer -->
              <ng-container matColumnDef="recentPartnersTableFooter">
                <td
                  class="px-3 border-none"
                  mat-footer-cell
                  *matFooterCellDef
                  colspan="6"
                >
                  <button mat-button [color]="'primary'">
                    See all partners
                  </button>
                </td>
              </ng-container>

              <tr
                mat-header-row
                *matHeaderRowDef="recentPartnersTableColumns"
              ></tr>
              <tr
                class="order-row h-16"
                mat-row
                *matRowDef="let row; columns: recentPartnersTableColumns"
              ></tr>
              <tr
                class="h-16"
                mat-footer-row
                *matFooterRowDef="['recentPartnersTableFooter']"
              ></tr>
            </table>
          </div>
        </div>
      </div>

      <div class="flex flex-auto w-full p-4 overflow-hidden gt-sm:w-full">
        <div
          class="flex flex-col flex-auto bg-card shadow-md rounded overflow-hidden"
        >
          <div class="p-6">
            <div
              class="font-bold text-md text-secondary uppercase tracking-wider"
            >
              Recent Orders
            </div>
            <div class="text-sm text-hint font-medium">
              {{ tableData.orders_list.count }} new today
            </div>
          </div>
          <div class="overflow-auto">
            <table
              class="w-full bg-transparent"
              mat-table
              matSort
              [dataSource]="recentOrdersDataSource"
              #recentOrdersTable
            >
              <!--order_id -->
              <ng-container matColumnDef="order_id">
                <th
                  class="bg-cool-gray-50 dark:bg-cool-gray-700 border-t"
                  mat-header-cell
                  mat-sort-header
                  *matHeaderCellDef
                >
                  <span class="whitespace-no-wrap"> Order ID </span>
                </th>
                <td mat-cell *matCellDef="let order">
                  <span
                    class="pr-6 font-medium text-sm text-secondary whitespace-no-wrap"
                  >
                    {{ order.order_id }}
                  </span>
                </td>
              </ng-container>

              <ng-container matColumnDef="full_name">
                <th
                  class="bg-cool-gray-50 dark:bg-cool-gray-700 border-t"
                  mat-header-cell
                  mat-sort-header
                  *matHeaderCellDef
                >
                  <span class="whitespace-no-wrap"> User Name </span>
                </th>
                <td mat-cell *matCellDef="let order">
                  <span class="pr-6 whitespace-no-wrap">
                    {{ order.full_name }}
                  </span>
                </td>
              </ng-container>

              <!-- Date -->
              <ng-container matColumnDef="paid">
                <th
                  class="bg-cool-gray-50 dark:bg-cool-gray-700 border-t"
                  mat-header-cell
                  mat-sort-header
                  *matHeaderCellDef
                >
                  <span class="whitespace-no-wrap"> Paid Status</span>
                </th>
                <td mat-cell *matCellDef="let order">
                  <span class="pr-6 whitespace-no-wrap">
                    {{ order.paid }}
                  </span>
                </td>
              </ng-container>

              <!-- Status -->
              <ng-container matColumnDef="status">
                <th
                  class="bg-cool-gray-50 dark:bg-cool-gray-700 border-t"
                  mat-header-cell
                  mat-sort-header
                  *matHeaderCellDef
                >
                  <span class="whitespace-no-wrap"> Status </span>
                </th>
                <td mat-cell *matCellDef="let order">
                  <span
                    class="inline-flex items-center font-bold text-xs px-2 py-2px rounded-full tracking-wide uppercase green-200"
                  >
                    <span class="w-2 h-2 rounded-full mr-2 bg-green"></span>
                    <span class="pr-2px leading-relaxed whitespace-no-wrap">{{
                      order.status
                    }}</span>
                  </span>
                </td>
              </ng-container>

              <ng-container matColumnDef="partner_name">
                <th
                  class="bg-cool-gray-50 dark:bg-cool-gray-700 border-t"
                  mat-header-cell
                  mat-sort-header
                  *matHeaderCellDef
                >
                  <span class="whitespace-no-wrap"> Partner Name </span>
                </th>
                <td mat-cell *matCellDef="let order">
                  <span class="pr-6 whitespace-no-wrap">
                    {{ order.partner_name }}
                  </span>
                </td>
              </ng-container>

              <!-- Footer -->
              <ng-container matColumnDef="recentOrdersTableFooter">
                <td
                  class="px-3 border-none"
                  mat-footer-cell
                  *matFooterCellDef
                  colspan="6"
                >
                  <button
                    mat-button
                    [routerLink]="['/orders']"
                    [color]="'primary'"
                  >
                    See all orders
                  </button>
                </td>
              </ng-container>

              <tr
                mat-header-row
                *matHeaderRowDef="recentOrdersTableColumns"
              ></tr>
              <tr
                class="order-row h-16"
                mat-row
                *matRowDef="let row; columns: recentOrdersTableColumns"
              ></tr>
              <tr
                class="h-16"
                mat-footer-row
                *matFooterRowDef="['recentOrdersTableFooter']"
              ></tr>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div *ngIf="isLoading" class="spinner-container">
    <mat-progress-spinner color="primary" mode="indeterminate" diameter="50">
    </mat-progress-spinner>
  </div>
</div>
